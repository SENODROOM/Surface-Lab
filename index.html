<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GraphSpace - 3D Surface Explorer</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Header -->
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3v18h18" />
                            <path d="M7 16c2-2 4-4 6-2s4 2 6-2" />
                        </svg>
                    </div>
                    <div class="logo-text">
                        <div class="logo-title">GraphSpace</div>
                        <div class="logo-subtitle">3D Surface Explorer</div>
                    </div>
                </div>
                <button class="btn-icon" onclick="addEquation()" title="Add Equation">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </button>
            </div>

            <!-- Equations List -->
            <div class="equations-container" id="equations-container">
                <!-- Equations will be dynamically added here -->
            </div>

            <!-- Function Keyboard -->
            <div class="section keyboard-section collapsed">
                <button class="section-toggle" onclick="toggleKeyboard()">
                    <span>⌨️ Function Keyboard</span>
                    <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                <div class="keyboard-content" id="keyboard-content">
                    <div class="keyboard-grid">
                        <button class="key-btn" onclick="insertAtActive('√()', 2)">√</button>
                        <button class="key-btn" onclick="insertAtActive('^2', 2)">x²</button>
                        <button class="key-btn" onclick="insertAtActive('^3', 2)">x³</button>
                        <button class="key-btn" onclick="insertAtActive('^', 1)">xⁿ</button>
                        <button class="key-btn" onclick="insertAtActive('sin()', 1)">sin</button>
                        <button class="key-btn" onclick="insertAtActive('cos()', 1)">cos</button>
                        <button class="key-btn" onclick="insertAtActive('tan()', 1)">tan</button>
                        <button class="key-btn" onclick="insertAtActive('exp()', 1)">eˣ</button>
                        <button class="key-btn" onclick="insertAtActive('ln()', 1)">ln</button>
                        <button class="key-btn" onclick="insertAtActive('abs()', 1)">|x|</button>
                        <button class="key-btn" onclick="insertAtActive('π')">π</button>
                        <button class="key-btn" onclick="insertAtActive('e')">e</button>
                    </div>
                </div>
            </div>

            <!-- Settings -->
            <div class="section collapsed">
                <button class="section-toggle" onclick="toggleSection('settings')">
                    <span>⚙️ Settings</span>
                    <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                <div class="section-content" id="settings-content">
                    <div class="setting-group">
                        <label>Domain Range</label>
                        <div class="range-inputs">
                            <div class="range-input-group">
                                <span class="range-label">X:</span>
                                <input type="number" id="xmin" value="-5" step="0.5">
                                <span class="range-separator">to</span>
                                <input type="number" id="xmax" value="5" step="0.5">
                            </div>
                            <div class="range-input-group">
                                <span class="range-label">Y:</span>
                                <input type="number" id="ymin" value="-5" step="0.5">
                                <span class="range-separator">to</span>
                                <input type="number" id="ymax" value="5" step="0.5">
                            </div>
                        </div>
                    </div>

                    <div class="setting-group">
                        <div class="slider-label">
                            <span>Resolution</span>
                            <span class="slider-value" id="res-value">50</span>
                        </div>
                        <input type="range" id="resolution" min="20" max="100" value="50" step="5">
                    </div>

                    <div class="setting-group">
                        <label>Actions</label>
                        <div class="action-buttons">
                            <button class="btn-secondary" onclick="resetCamera()">Reset View</button>
                            <button class="btn-secondary" onclick="toggleGrid()">Toggle Grid</button>
                            <button class="btn-secondary" onclick="toggleAxes()">Toggle Axes</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Presets -->
            <div class="section collapsed" style="margin-bottom: 90px;">
                <button class="section-toggle" onclick="toggleSection('presets')">
                    <span>⚡ Presets</span>
                    <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                <div class="section-content" id="presets-content" style="padding-top: 5px;">
                    <div class="presets-grid">
                        <button class="preset-card" onclick="loadPreset('sin(√(x²+y²))', '#6366f1')">
                            <div class="preset-name">Ripple Wave</div>
                            <div class="preset-equation">sin(√(x²+y²))</div>
                        </button>
                        <button class="preset-card" onclick="loadPreset('x²+y²', '#ec4899')">
                            <div class="preset-name">Paraboloid</div>
                            <div class="preset-equation">x²+y²</div>
                        </button>
                        <button class="preset-card" onclick="loadPreset('x²-y²', '#8b5cf6')">
                            <div class="preset-name">Saddle</div>
                            <div class="preset-equation">x²-y²</div>
                        </button>
                        <button class="preset-card" onclick="loadPreset('sin(x)cos(y)', '#10b981')">
                            <div class="preset-name">Wave Grid</div>
                            <div class="preset-equation">sin(x)cos(y)</div>
                        </button>
                        <button class="preset-card" onclick="loadPreset('exp(-(x²+y²))', '#f59e0b')">
                            <div class="preset-name">Gaussian</div>
                            <div class="preset-equation">exp(-(x²+y²))</div>
                        </button>
                        <button class="preset-card" onclick="loadPreset('cos(√(x²+y²))/(1+0.1(x²+y²))', '#06b6d4')">
                            <div class="preset-name">Mexican Hat</div>
                            <div class="preset-equation">cos(√(x²+y²))/(1+0.1(x²+y²))</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Canvas Area -->
        <div class="canvas-area">
            <div class="canvas-header">
                <div class="canvas-info">
                    <div class="info-badge">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                        <span>Drag to rotate • Scroll to zoom • Shift+Drag to pan</span>
                    </div>
                </div>
                <div class="canvas-stats">
                    <div class="stat-badge">
                        <span class="stat-label">Points:</span>
                        <span class="stat-value" id="stat-points">2,500</span>
                    </div>
                    <div class="stat-badge">
                        <span class="stat-label">Surfaces:</span>
                        <span class="stat-value" id="stat-surfaces">0</span>
                    </div>
                </div>
            </div>
            <canvas id="canvas3d"></canvas>
        </div>
    </div>

    <!-- Autocomplete Dropdown (shared) -->
    <div class="autocomplete-dropdown" id="autocomplete"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="script.js"></script>
</body>

</html>